<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulador de Densidades</title>
  <link rel="stylesheet" href="/static/styles/style.css">
</head>

<body>

  <!-- Encabezado con menu despegable -->
  <div class = "encabezado text-center">
    <img src="/static/recursos/lapiz.png" alt = "Logo" class ="logo">
    <h1 style="text-align: center;">Simulador de Densidades</h1>
    
  </div>

  

  <div class="container">

    
    <!-- Navegación lateral -->
    <nav class="sidebar">
      <div class="sidebar-title">Distribuciones</div>
      <button class="nav-item active" data-distribution="bernoulli">Bernoulli</button>
      <button class="nav-item" data-distribution="binomial">Binomial</button>
      <button class="nav-item" data-distribution="multinomial">Multinomial</button>
      <button class="nav-item" data-distribution="exponencial">Exponencial</button>
      <button class="nav-item" data-distribution="normal">Normal</button>
      <button class="nav-item" data-distribution="gibbs">Método de Gibbs</button>
      <button class="nav-item" data-distribution="normal-bivariada">Normal Bivariada</button>
    </nav>

    <!-- Contenido principal -->
    <div class="main-content">
      <!-- Panel de resultados -->
      <div class="results-panel">
        <div class="results-header">
          <h3>Resultados</h3>
          <button class="btn">Descargar CSV</button>
        </div>
        <div class="results-content">
          <p>¡Aquí podrás observar los resultados de la simulación!</p>
        </div>
      </div>

      <!-- Panel de simulación -->
      <div class="simulation-panel">
        <h2 class="panel-title" id="panelTitle">Distribución de Bernoulli</h2>

        <!-- Contenido  Bernu -->
        <div class="distribution-content active" id="bernoulli">
          <div class="inputs-section">
            <div class="input-group">
              <label for="bernoulli-p">Probabilidad de éxito (p):</label>
              <input type="number" id="bernoulli-p" min="0" max="1" step="0.01" value="0.5">
            </div>
            <div class="input-group">
              <label for="bernoulli-n">Número de simulaciones:</label>
              <input type="number" id="bernoulli-n" min="1" value="1000">
            </div>
          </div>
          <div class="buttons-section">
            <button class="btn-primary">Simular</button>
            <button class="btn-primary">Limpiar</button>
          </div>
        </div>

        <!-- Contenido para Binomial -->
        <div class="distribution-content" id="binomial">
          <div class="inputs-section">
            <div class="input-group">
              <label for="binomial-n">Número de ensayos (n):</label>
              <input type="number" id="binomial-n" min="1" value="10">
            </div>
            <div class="input-group">
              <label for="binomial-p">Probabilidad de éxito (p):</label>
              <input type="number" id="binomial-p" min="0" max="1" step="0.01" value="0.5">
            </div>
            <div class="input-group">
              <label for="binomial-sims">Número de simulaciones:</label>
              <input type="number" id="binomial-sims" min="1" value="1000">
            </div>
          </div>
          <div class="buttons-section">
            <button class="btn-primary">Simular</button>
            <button class="btn-primary">Limpiar</button>
          </div>
        </div>




        <!-- Contenido para Multinomial -->
        <div class="distribution-content" id="multinomial">
          
          <div class="tabs">
            <button class="tab-button active" onclick="cambiarTab('simulacion')">Simulación Basica</button>
            <button class="tab-button" onclick="cambiarTab('probabilidad')">Distribucion Multinomial</button>
          </div>
          
          <div id="simulacion" class="tab-content active">
            <div class="main-grid">
              <div class="inputs-section">
                <div class="panel-title">Parámetros de Simulación</div>
                
                <div class="section">
                  <div class="input-group">
                    <label>Número de Experimentos</label>
                    <input type="number" id="n_experimentos" value="5000" min="1">
                  </div>
                </div>

                <div class="section">
                  <div class="section-header">Categorías y Probabilidades</div>
                  <div id="categories-container">
                    <div class="category-item" data-index="0">
                      <div class="category-header">
                        <span class="category-name">🔴 Categoria 1</span>
                        <button class="remove-btn" onclick="removeCategory(0)">✕</button>
                      </div>
                      <div class="input-row">
                        <div class="input-group">
                          <label>Nombre</label>
                          <input type="text" class="cat-name" value="Rojo">
                        </div>
                        <div class="input-group">
                          <label>Probabilidad</label>
                          <input type="number" class="cat-prob" value="0.5" min="0" max="1" step="0.01">
                        </div>
                      </div>
                    </div>
                    <div class="category-item" data-index="1">
                      <div class="category-header">
                        <span class="category-name">🟢 Categoria 2</span>
                        <button class="remove-btn" onclick="removeCategory(1)">✕</button>
                      </div>
                      <div class="input-row">
                        <div class="input-group">
                          <label>Nombre</label>
                          <input type="text" class="cat-name" value="Verde">
                        </div>
                        <div class="input-group">
                          <label>Probabilidad</label>
                          <input type="number" class="cat-prob" value="0.3" min="0" max="1" step="0.01">
                        </div>
                      </div>
                    </div>
                    <div class="category-item" data-index="2">
                      <div class="category-header">
                        <span class="category-name">🔵 Categoria 3</span>
                        <button class="remove-btn" onclick="removeCategory(2)">✕</button>
                      </div>
                      <div class="input-row">
                        <div class="input-group">
                          <label>Nombre</label>
                          <input type="text" class="cat-name" value="Azul">
                        </div>
                        <div class="input-group">
                          <label>Probabilidad</label>
                          <input type="number" class="cat-prob" value="0.2" min="0" max="1" step="0.01">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div id="prob-sum-warning" class="prob-warning" style="display:none"></div>
                  <button class="add-category-btn" onclick="addCategory()">+ Añadir Categoría</button>
                </div>

                <button class="simulate-btn" onclick="simularMultinomial()">
                  🚀 Ejecutar Simulación
                </button>
              </div>

              <div class="panel results-panel">
                <div class="panel-title">📈 Resultados</div>
                <div id="placeholder-sim" class="placeholder">
                  Configure los parámetros y presione "Ejecutar Simulación"
                </div>
                <div id="resultados-sim" class="hidden"></div>
              </div>
            </div>
          </div>  

        <!-- TAB PROBABILIDAD -->
    <div id="probabilidad" class="tab-content">
      <div class="main-grid">
        <div class="inputs-section">
          <div class="panel-title">Configuración del Cálculo</div>
          
          <div class="section">
            <div class="input-group">
              <label>Número Total de Experimentos (n)</label>
              <input type="number" id="n_exp_prob" value="10" min="1">
            </div>
          </div>

          <div class="section">
            <div class="section-header">Configuración de Categorías</div>
            <div id="categories-prob-container">
              <div class="category-item" data-index="0">
                <div class="category-header">
                  <span class="category-name">Categoría 1</span>
                  <button class="remove-btn" onclick="removeCategoryProb(0)">✕</button>
                </div>
                <div class="input-row">
                  <div class="input-group">
                    <label>Nombre</label>
                    <input type="text" class="cat-name-prob" value="A">
                  </div>
                  <div class="input-group">
                    <label>Probabilidad (p)</label>
                    <input type="number" class="cat-prob-prob" value="0.3" min="0" max="1" step="0.01">
                  </div>
                  <div class="input-group">
                    <label>Frecuencia Deseada (k)</label>
                    <input type="number" class="cat-freq-prob" value="3" min="0">
                  </div>
                </div>
              </div>
            </div>
            <div id="prob-sum-warning-2" class="prob-warning" style="display:none"></div>
            <button class="add-category-btn" onclick="addCategoryProb()">+ Añadir Categoría</button>
          </div>

          <button class="simulate-btn" onclick="calcularProbabilidad()">
            🧮 Calcular Probabilidad
          </button>
          <button class="simulate-btn" style="background: linear-gradient(135deg, #27ae60, #229954); margin-top: 0.5rem;" onclick="verificarSimulacion()">
            ✓ Verificar con Simulación
          </button>
        </div>


        </div>
        </div>
        </div>

        <!-- Contenido para Exponencial -->
        <div class="distribution-content" id="exponencial">
          <div class="inputs-section">
            <div class="input-group">
              <label for="exponencial-lambda">Parámetro λ (lambda):</label>
              <input type="number" id="exponencial-lambda" min="0.01" step="0.01" value="1">
            </div>
            <div class="input-group">
              <label for="exponencial-n">Número de simulaciones:</label>
              <input type="number" id="exponencial-n" min="1" value="1000">
            </div>
          </div>
          <div class="buttons-section">
            <button class="btn-primary">Simular</button>
            <button class="btn-primary">Limpiar</button>
          </div>
        </div>

        <!-- Contenido para Normal -->
        <div class="distribution-content" id="normal">
          <div class="inputs-section">
            <div class="input-group">
              <label for="normal-mu">Media (μ):</label>
              <input type="number" id="normal-mu" step="0.01" value="0">
            </div>
            <div class="input-group">
              <label for="normal-sigma">Desviación estándar (σ):</label>
              <input type="number" id="normal-sigma" min="0.01" step="0.01" value="1">
            </div>
            <div class="input-group">
              <label for="normal-n">Número de simulaciones:</label>
              <input type="number" id="normal-n" min="1" value="1000">
            </div>
          </div>
          <div class="buttons-section">
            <button class="btn-primary">Simular</button>
            <button class="btn-primary">Limpiar</button>
          </div>
        </div>

        <!-- Contenido para Método de Gibbs -->
        <div class="distribution-content" id="gibbs">
          <div class="inputs-section">
             <div class="input-group">
              <label for="limite_inf">Limite inferior:</label>
              <input type="number" id="limite_inf" value="0">
            </div>
            <div class="input-group">
              <label for="limite_sup">Limite superior:</label>
              <input type="number" id="limite_sup" value="2">
            </div>
            <div class="input-group">
              <label for="x0">X:</label>
              <input type="number" id="x0" value="0">
            </div>
            <div class="input-group">
              <label for="y0">Y:</label>
              <input type="number" id="y0" value="0">
            </div>
            <div class="input-group">
              <label for="gibbs-iterations">Número de esperimentos:</label>
              <input type="number" id="gibbs-iterations" min="0" value="1000">
            </div>
            <div class="input-group">
              <label for="gibbs-burnin">Período de calentamiento:</label>
              <input type="number" id="gibbs-burnin" min="0" value="100">
            </div>
          </div>
          <div class="buttons-section">
            <button class="btn-primary">Simular</button>
            <button class="btn-primary">Limpiar</button>
          </div>
        </div>

        <div class="distribution-content" id="normal-bivariada">
          <div class="inputs-section">
            <div class="input-group">
              <label for="bivariada-mu-x">Media X (μₓ):</label>
              <input type="number" id="bivariada-mu-x" step="0.1" value="0">
            </div>
            <div class="input-group">
              <label for="bivariada-mu-y">Media Y (μᵧ):</label>
              <input type="number" id="bivariada-mu-y" step="0.1" value="0">
            </div>
            <div class="input-group">
              <label for="bivariada-sigma-x">Desviación X (σₓ):</label>
              <input type="number" id="bivariada-sigma-x" min="0.01" step="0.1" value="1">
            </div>
            <div class="input-group">
              <label for="bivariada-sigma-y">Desviación Y (σᵧ):</label>
              <input type="number" id="bivariada-sigma-y" min="0.01" step="0.1" value="1">
            </div>
            <div class="input-group">
              <label for="bivariada-rho">Correlación (ρ):</label>
              <input type="number" id="bivariada-rho" min="-1" max="1" step="0.1" value="0.5">
              <small>Valor entre -1 y 1</small>
            </div>
            <div class="input-group">
              <label for="bivariada-n">Número de simulaciones:</label>
              <input type="number" id="bivariada-n" min="100" value="1000">
            </div>
          </div>
          <div class="buttons-section">
            <button class="btn-primary">Simular</button>
            <button class="btn-primary">Limpiar</button>
          </div>
        </div>

        <!-- Sección de gráfica -->
        <div class="chart-section" id="chart" style="height: 400px; margin-top: 20px;">
          <div class="chart-placeholder">
            📈 Selecciona una distribución y ajusta los parámetros para generar la gráfica
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Librerías necesarias -->
  <script src="https://cdn.plot.ly/plotly-3.1.0.min.js"></script>

  <!-- Script -->
  <script src="/static/js/simulador.js"></script>
  
</body>
</html>
